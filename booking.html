<head>
    <!-- 1. Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,shrink-to-fit=no"
    />
  
    <!-- 2. Bootstrap CSS (optional) -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"
      integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
      crossorigin="anonymous"
    />
  
    <!-- 3. FontAwesome (for icons) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      crossorigin="anonymous"
    />
  
    <!-- 4. TailwindCSS (for your navbar’s utility classes) -->
    <script src="https://cdn.tailwindcss.com"></script>
  
    <!-- 5. Your main site stylesheet (contains navbar, buttons, etc.) -->
    <link rel="stylesheet" href="css/style.css" />
  
    <!-- 6. Then your booking‑page–specific overrides -->
    <link rel="stylesheet" href="css/booking.css" />
  
    <!-- 7. includes.js (for pulling in navbar.html) -->
    <script src="js/includes.js" defer></script>
 
    <!-- 8. Your main application code (initializes nav, accordions, etc.) -->
    <script type="module" src="js/main.js" defer></script>

  
    <title>Book a Cleaning — Sweet Africa Global LLC</title>
  </head>

<body>

  <!-- pull in your navbar partial (if you have it) -->
  <div data-include="navbar.html"></div>

  <section id="booking" class="py-5 bg-light">
    <div class="container">
      <div class="booking-card mx-auto">
        <div class="step-indicator">Step 1 of 4</div>
        <h2 class="mb-4">When and where do you need cleaning?</h2>
        <form>
          <!-- Full name -->
          <div class="form-group">
            <label for="fullName">Full name</label>
            <input
              type="text"
              id="fullName"
              class="form-control"
              placeholder="Type your full name"
              required
            >
          </div>

          <!-- Phone & Referral -->
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="phoneNumber">Phone number</label>
              <input
                type="tel"
                id="phoneNumber"
                class="form-control"
                placeholder="Type your phone number"
                pattern="^\+1 \(\d{3}\) \d{3}\-\d{4}$"
                title="Format: +1 (123) 456-7890"
                required
              >
            </div>
            <div class="form-group col-md-6">
              <label for="referral">Where did you hear about us?</label>
              <select id="referral" class="form-control" required>
                <option value="" disabled selected>Select</option>
                <option>Google</option>
                <option>Facebook</option>
                <option>Friend</option>
                <option>Other</option>
              </select>
            </div>
          </div>

          <!-- Day & Time -->
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="dayPicker">Day</label>
              <input
                type="date"
                id="dayPicker"
                class="form-control"
                required
              />
            </div>
            <div class="form-group col-md-6">
              <label for="timePicker">Time</label>
              <input
                type="time"
                id="timePicker"
                class="form-control"
                required
              />
            </div>
          </div>

          <!-- Address -->
          <div class="form-group">
            <label>Address</label>
            <button type="button" class="btn add-address-btn">
              <i class="fas fa-plus-circle"></i>
              Add a new address
            </button>
          </div>

             <!-- NEW: hidden address & unit inputs -->
             <div id="address-form" class="d-none">
              <div class="form-group">
                <label for="addressLine">Address</label>
                <input type="text" id="addressLine" class="form-control" placeholder="Enter your address">
              </div>
              <div class="form-group">
                <label for="unit">Unit / Apt #</label>
                <input type="text" id="unit" class="form-control" placeholder="Unit, Apt, Suite (optional)">
              </div>
            </div>

          <!-- Next step -->
          <button type="submit" class="btn btn-next btn-block">
            Next step
          </button>
        </form>
      </div>
    </div>
  </section>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const addBtn   = document.querySelector(".add-address-btn");
      const addrForm = document.getElementById("address-form");
      if (!addBtn || !addrForm) return;

      addBtn.addEventListener("click", () => {
        // toggle visibility
        addrForm.classList.toggle("d-none");

        // if we just showed it, run geolocation check
        if (!addrForm.classList.contains("d-none") && navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            (pos) => {
              const { latitude, longitude } = pos.coords;
              const inCA =
                latitude  >= 32.5 &&
                latitude  <= 42.0 &&
                longitude >= -124.5 &&
                longitude <= -114.0;

              if (!inCA) {
                alert("Sorry, we only serve California addresses.");
                addrForm.classList.add("d-none");
              } else {
                // pre‑fill with coords (or you could reverse‑geocode here)
                document.getElementById("addressLine").placeholder =
                  `Your location: ${latitude.toFixed(4)}, ${longitude.toFixed(4)}`;
              }
            },
            (err) => {
              console.warn("Geolocation failed:", err);
              // user can still type manually
            }
          );
        }
      });
    });
    document.addEventListener("DOMContentLoaded", () => {
  const phoneInput = document.getElementById("phoneNumber");
  if (!phoneInput) return;

  phoneInput.addEventListener("input", (e) => {
    // strip non‑digits
    let digits = e.target.value.replace(/\D/g, "");

    // if the user just backspaced the last digit, clear entirely
    if (e.inputType === "deleteContentBackward" && digits.length === 0) {
      e.target.value = "";
      return;
    }

    // limit to 10 digits (US number)
    digits = digits.substring(0, 10);

    // split into parts
    const part1 = digits.substring(0, 3);
    const part2 = digits.substring(3, 6);
    const part3 = digits.substring(6);

    // rebuild the mask
    let formatted = "+1";
    if (part1) {
      formatted += " (" + part1;
      if (part1.length === 3) formatted += ")";
    }
    if (part2) formatted += " " + part2;
    if (part3) formatted += "-" + part3;

    e.target.value = formatted;
  });
});
  </script>
</body>

</body>
</html>